!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r);n(1);$((function(){var t,e,n,r,a,i,u,s,l,f,c=$(".overlay"),d=$(".global-status"),p={};e=[],n=$(".items-container"),r=n.find("[data-header]").find("span"),a=n.find("a[data-action=filter]"),i=n.find("[data-header=filter]"),u=i.find("input"),s=n.find("a[data-action=load]"),l=function(){n.find("div:not([data-header])").remove();var t=o()(e).filter((function(t){return t.Key.includes((u.val()||"").trim())}));t.map((function(t){n.append("<div data-row>".concat(t.Key,"</div>"))}));var a=r.attr("data-text")+": ".concat(e.length);t.length!=e.length&&(a+=" - ".concat(r.attr("data-text-filtered"),": ").concat(t.length)),r.text(a)},f=function(){return new Promise((function(r){return n.css("opacity",".3"),t.listObjects((function(t,n){return e=n.Contents,r(l())}))})).then((function(){n.css("opacity","1")}))},a.on("click",(function(){i.toggleClass("d-none")})),u.on("keyup",(function(t){return l()})),s.on("click",(function(){f()})),p.load=f;var v=function(e){var n=$(".upload-status-template").clone();n.insertAfter($(".upload-status-template")),n.removeClass("upload-status-template d-none");var r=n.find(".progress"),o=r.find(".progress-bar"),a=r.find("small"),i=n.find(".time"),u=n.find(".name"),s=n.find(".size"),l=n.find(".link");return n.attr("data-status","uploading"),new Promise((function(n){if(!e)return n({error:"file"});var r={Key:"folder/"+(new Date).getTime()+"_"+e.name.replace(/ /gi,"-"),ContentType:e.type,Body:e};return i.text((new Date).toLocaleString()),u.text(e.name),s.text(e.size+" Bytes"),t.upload(r,(function(t,r){return t||!r.Location?n({error:"upload"}):(l.attr("href",r.Location).text(r.Location).removeClass("d-none"),n({type:e.type,bucket:r.Bucket,key:r.Key,url:r.Location}))})).on("httpUploadProgress",(function(t){t.total;var e=t.loaded/t.total,n=Math.round(100*e);o.attr("aria-valuemax",t.total).attr("aria-valuenow",t.loaded).css("width",n+"%"),a.text(n+" / 100 %")}))})).then((function(t){n.attr("data-status",t.error?"error":"success"),p.load()}))};return $.when($.get("/aws-config"),$.getScript("https://sdk.amazonaws.com/js/aws-sdk-2.283.1.min.js")).then((function(e){var n=e[0];AWS.config.region=n.region,AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:n.identity}),AWS.config.credentials.get((function(t){if(t)return{error:t}})),t=new AWS.S3({params:{Bucket:n.bucketName,Prefix:"folder/"}})})).then((function(t){var e=d.find(".init");if(t&&t.error)return e.text(JSON.stringify(t.error));e.text(e.attr("data-text")),$("html").on("dragover",(function(t){t.preventDefault(),t.stopPropagation()})).on("drop",(function(t){t.preventDefault(),t.stopPropagation()})),c.on("dragenter",(function(t){t.stopPropagation(),t.preventDefault()})).on("dragover",(function(t){t.stopPropagation(),t.preventDefault(),c.addClass("active")})).on("dragleave",(function(t){})).on("drop",(function(t){t.stopPropagation(),t.preventDefault(),c.removeClass("active");var e=t.originalEvent.target.files||t.originalEvent.dataTransfer.files;Object.values(e).map((function(t){return v(t)}))})),p.load()}))}))},function(t,e,n){},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(4),o=n(5),a=n(6),i=n(7);t.exports=function(t){return r(t)||o(t)||a(t)||i()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(2);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(2);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}]);